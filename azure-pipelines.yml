trigger:
- main

pool:
  name: 'pool01'

variables:
- group: GitHub

steps:
- checkout: self
  persistCredentials: true
  fetchDepth: 0

- script: |
    git config user.email "vicentefs@outlook.com"
    git config user.name "Vicente Fritzen da Silva"

    # remove o remoto se jÃ¡ existir
    git remote remove github 2>/dev/null || true
    git remote add github https://$(GITHUB_USER):$(GITHUB_TOKEN)@github.com/$(GITHUB_USER)/www-vercel-petsys.git

    echo "Verificando branches locais..."
    git branch -a

    # garante que a branch main exista localmente
    git checkout -B main

    echo "Pushing branch main to GitHub..."
    git push github main --force
  displayName: 'Sync Azure DevOps main to GitHub'
